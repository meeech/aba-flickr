<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
        <title></title>
        <script src="http://yui.yahooapis.com/3.0.0/build/yui/yui-min.js"></script>
    </head>
    <body>
<style type="text/css" media="screen">
div#shell {
    border: 1px solid red;
    height: 100%;
    width: 100%;
}
</style>
<div id="shell">
    <div id="foo">
        
    </div>
</div>

<script type="text/javascript" charset="utf-8">
//Init so it has global scope
var jsonFlickrFeed;

YUI().use('node', 'substitute', 'dump', function(Y) {

jsonFlickrFeed = function (data) {
    if( Y.Lang.isUndefined(data.items)) { return false; }
    var items = data.items;

    var container = Y.Node.create('<div id="montreal"></div>');
    console.log(container);
    Y.each(items, function(item) {
        //fix the src
        item['thumb_src'] = item.media.m;
        var nodehtml = Y.substitute("<a href='{url}'><img src='{thumb_src}'></a><br>{title}<br>", item);
        container.append(Y.Node.create(nodehtml));
    });
    Y.one('#shell').append(container);
    return true;
};

var defaultArgs = ['id=35130544@N02','lang=en-us','format=json'];
var baseFlickrUrl = 'http://api.flickr.com/services/feeds/photos_public.gne?' + defaultArgs.join('&');
    
var objTransaction = Y.Get.script([
        baseFlickrUrl + "&tags=montreal"
        // baseFlickrUrl + "&tags=fireworks"
]);

});//end closure
</script>

    </body>
</html>
